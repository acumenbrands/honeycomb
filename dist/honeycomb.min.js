window.Honeycomb={},$.fn.honeyhover=function(a){return $.each(this,function(b,c){this.honey=new Honeycomb.Hover(c,a)})},document.addEventListener("DOMContentLoaded",function(){window.Honeycomb.__bindable=(new Bindable).bindAll()}),Honeycomb.bind=function(a,b){return function(){a.apply(b,arguments)}},Honeycomb.CustomEvent=function(a,b){var c=document.createEvent("Event");return c.initEvent(a,b.bubbles,b.cancellable),c},Honeycomb.Hover=function(){function a(a,b){this.el=a,this.options=new Honeycomb.Options(this.el,b),this.overDelay=this.options.overDelay,this.outDelay=this.options.outDelay,this.sensitivity=this.options.sensitivity,this.over=new Honeycomb.HoverOver(this.el,this.options),this.out=new Honeycomb.HoverOut(this.el,this.options)}return a.prototype.off=function(){this.over.off(),this.out.off()},a}(),Bindable.register("honey-hover",Honeycomb.Hover),Honeycomb.HoverOut=function(){function a(a,b){this.el=a,this.options=new Honeycomb.Options(this.el,b),this.intent=Honeycomb.bind(this.intent,this),$(this.el).on("mouseleave",this.intent)}return a.prototype.off=function(){$(this.el).off("mouseleave",this.intent)},a.prototype.intent=function(a){new Honeycomb.OutIntent(a,this.options)},a}(),Bindable.register("honey-out",Honeycomb.HoverOut),Honeycomb.HoverOver=function(){function a(a,b){this.el=a,this.options=new Honeycomb.Options(this.el,b),this.intent=Honeycomb.bind(this.intent,this),this.event_type=this.options.ignore_bubbles?"mouseenter":"mouseover",$(this.el).on(this.event_type,this.intent)}return a.prototype.off=function(){$(this.el).off(this.event_type,this.intent)},a.prototype.intent=function(a){new Honeycomb.OverIntent(a,this.options)},a}(),Bindable.register("honey-over",Honeycomb.Over),Honeycomb.Mouse=function(){function a(a,b){this.el=a,this.event=b,this.x=b.pageX,this.y=b.pageY,this.update=Honeycomb.bind(this.update,this)}return a.prototype.track=function(){return $(this.el).on("mousemove",this.update),this},a.prototype.removeTracking=function(){$(this.el).off("mousemove",this.update)},a.prototype.compare=function(a){return Math.sqrt(Math.pow(this.x-a.x,2)+Math.pow(this.y-a.y,2))},a.prototype.update=function(a){this.x=a.pageX,this.y=a.pageY},a}(),Honeycomb.Options=function(){function a(b,c){return c instanceof a?c:(this.el=b,void 0===c&&(c={el:this.el}),c=$.extend(this.defaults,c),this.overDelay=c.overDelay,this.outDelay=c.outDelay,this.sensitivity=c.sensitivity,void(this.ignore_bubbles=c.ignore_bubbles))}return a.prototype.defaults={sensitivity:7,overDelay:50,outDelay:0,ignore_bubbles:!1},a}(),Honeycomb.OutIntent=function(){function a(a,b){this.event=a,this.hover=b,this.timeout=b.timeout,this.dispatch=Honeycomb.bind(this.dispatch,this),this.clear(this.timeout),this.hover.timeout=this.set()}return a.prototype.set=function(){setTimeout(this.dispatch,this.hover.outDelay)},a.prototype.clear=function(){clearTimeout(this.timeout)},a.prototype.dispatch=function(){this.event.target.dispatchEvent(this.hoverEvent())},a.prototype.hoverEvent=function(){var a=new Honeycomb.CustomEvent("hoverout",{bubbles:!1,cancellable:!0});return a.pageX=this.event.pageX,a.pageY=this.event.pageY,a},a}(),Honeycomb.OverIntent=function(){function a(a,b){this.el=b.el,this.event=a,this.hover=b,this.originalPosition=new Honeycomb.Mouse(this.el,a),this.trackedPosition=new Honeycomb.Mouse(this.el,a).track(),this._attempt=Honeycomb.bind(this._attempt,this),this._setIntentionDelay()}return a.prototype.set=function(){this.hover.timeout=setTimeout(this._attempt,this.hover.overDelay)},a.prototype.clear=function(){clearTimeout(this.hover.timeout)},a.prototype._setIntentionDelay=function(){this.clear(),this.set()},a.prototype.mouseMovement=function(){return this.originalPosition.compare(this.trackedPosition)},a.prototype.hoverEvent=function(){var a=new Honeycomb.CustomEvent("hoverin",{bubbles:!0,cancellable:!0});return a.pageX=this.trackedPosition.x,a.pageY=this.trackedPosition.y,a},a.prototype._attempt=function(){this.hover.sensitivity>this.mouseMovement()?(this._success(),this.trackedPosition.removeTracking()):this._failure()},a.prototype._success=function(){this.event.target.dispatchEvent(this.hoverEvent())},a.prototype._failure=function(){this.originalPosition.update({pageX:this.trackedPosition.x,pageY:this.trackedPosition.y}),this._setIntentionDelay()},a}();